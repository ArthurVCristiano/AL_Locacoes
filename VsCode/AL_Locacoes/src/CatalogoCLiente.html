<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="MenuAdminStyle.css">
    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/main.min.css' rel='stylesheet' />
    <link rel="stylesheet" href="catalogoClienteStyle.css"> 
    <title>AL Locações</title>
    
    <style>
        .hidden {
            display: none !important;
        }
        #carrinho-passo-2 {
            display: none;
        }
        #carrinho-wrapper.passo-2-ativo #carrinho-passo-1 {
            display: none;
        }
        #carrinho-wrapper.passo-2-ativo #carrinho-passo-2 {
            display: block;
        }
        .produtos-carrinho-lista {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 20px;
        }
        #lista-carrinho {
            list-style: none;
            padding: 0;
        }
        .item-carrinho {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px dashed #eee;
        }
        .item-carrinho:last-child {
            border-bottom: none;
        }
        .nome-produto {
            flex: 2;
        }
        .detalhes {
            flex: 3;
            text-align: right;
        }
        .subtotal-item {
            flex: 1.5;
            text-align: right;
            font-weight: bold;
        }
        .btn-remover {
            margin-left: 10px;
            background: #e74c3c;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 4px;
        }
        #carrinho-total h3 {
            text-align: right;
            margin-top: 20px;
        }
        .pagamento-container {
            max-width: 400px;
            margin: 40px auto;
            text-align: center;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .qrcode-area img {
            width: 200px;
            height: 200px;
            margin: 15px 0;
        }
        .chave-pix-texto {
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 4px;
            font-size: 0.9em;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

    <header id="menu-bar">
        <div class="link-logo"><a href="#" id="link-logo">AL Locação</a></div>
        <ul class="nav-links">
            <li><a href="#" id="link-carrinho">
                <i class='bx bxs-cart'></i>
                <span>Carrinho</span> </a></li>
            <li><a href="#" id="link-opcoes">
                <i class='bx bxs-cog'></i>
                <span>Opções</span>
            </a></li>
            <li><a href="#" id="link-sair">  
                <i class='bx bxs-log-out'></i>
                <span>Sair</span>
            </a></li>
        </ul>
    </header>

    <main id="main-content-area"> 
        <section id="tela-catalogo">
            <h1 class="titulo-catalogo">Catálogo de Produtos</h1>
            
            <div class="produtos-lista">
                <article class="produto-card" data-produto-id="1">
                <div class="produto-imagem">
                    <img src="/assets/imagens/conjuntoPlastico.png" alt="Conjunto: Mesa + 4 Cadeiras">
                </div>
                <div class="produto-detalhes">
                    <h2 class="produto-nome">Conjunto: Mesa + 4 Cadeiras</h2>
                    <p class="produto-preco">R$ 14,00 <span class="unidade-texto">Conjunto</span></p>
                    <p class="produto-estoque">Unidades restantes: COLCOAR VALOR RESTANTE DISPONIVEIS</p>
                    <button class="botao-comprar" onclick="adicionarAoCarrinho({
                            id: 'conjunto', 
                            nome: 'Conjunto: Mesa + 4 cadeiras', 
                            preco: 14.00, 
                            quantidade: 1 
                        })">Adicionar ao carrinho<i class='bx bx-cart-add'></i></button>
                    </div>
                </article>
                
                <article class="produto-card" data-produto-id="2">
                        <div class="produto-imagem">
                    <img src="/assets/imagens/cadeira-de-plastico-latina-6734d1b466bdb.png" alt="Cadeira unitária">
                </div>
                <div class="produto-detalhes">
                    <h2 class="produto-nome">Cadeira unitária</h2>
                    <p class="produto-preco">R$ 3,00 <span class="unidade-texto">Unidade</span></p>
                    <p class="produto-estoque">Unidades restantes: COLCOAR VALOR RESTANTE DISPONIVEIS</p>
                    <button class="botao-comprar" onclick="adicionarAoCarrinho({
                            id: 'cadeira', 
                            nome: 'Cadeira unitária', 
                            preco: 3.00, 
                            quantidade: 1 
                        })">Adicionar ao carrinho<i class='bx bx-cart-add'></i></button>
                </div>
                </article>
                
                <article class="produto-card" data-produto-id="3">
                 <div class="produto-imagem">
                    <img src="/assets/imagens/MesaPlastico.jpg" alt="Mesa unitária">
                </div>
                <div class="produto-detalhes">
                    <h2 class="produto-nome">Mesa unitária</h2>
                    <p class="produto-preco">R$ 8,50 <span class="unidade-texto">Unidade</span></p>
                    <p class="produto-estoque">Unidades restantes: COLCOAR VALOR RESTANTE DISPONIVEIS</p>
                    <button class="botao-comprar"onclick="adicionarAoCarrinho({
                            id: 'mesa', 
                            nome: 'Mesa unitária', 
                            preco: 8.50, 
                            quantidade: 1 
                        })">Adicionar ao carrinho<i class='bx bx-cart-add'></i></button>
                </div></article>
                
                <article class="produto-card" data-produto-id="4">
                <div class="produto-imagem">
                    <img src="/assets/imagens/TOALHANAMESA.jpeg" alt="Toalha de Mesa - Branca">
                </div>
                <div class="produto-detalhes">
                    <h2 class="produto-nome">Toalha de Mesa - Branca</h2>
                    <p class="produto-preco">R$ 8,50<span class="unidade-texto">Unidade</span></p>
                    <p class="produto-estoque">Unidades restantes: COLCOAR VALOR RESTANTE DISPONIVEIS</p>
                    <button class="botao-comprar" onclick="adicionarAoCarrinho({
                            id: 'toalha', 
                            nome: 'Toalha de Mesa', 
                            preco: 8.5, 
                            quantidade: 1 
                        })">Adicionar ao carrinho<i class='bx bx-cart-add'></i></button>
                </div></article>
            </div>
        </section>

        <section id="tela-locacao" class="hidden"> 
            <h1 class="page-title titulo-carrinho">Carrinho de compras</h1>

            <div id="carrinho-wrapper" class="transicao-wrapper">
                
                <div id="carrinho-passo-1" class="carrinho-passo">
                    <div class="carrinho-container">
                        
                        <button id="btn-iniciar-checkout" class="fechar-pedido-btn">Fechar Pedido (0 itens)</button>
                        
                        <div class="subtotal-info">
                            <p>Subtotal: R$ VALOR TOTAL</p>
                            <p>Frete e Manuseio: R$ VALOR DE FRETE</p>
                        </div>
                        
                        <div class="produtos-carrinho-lista">
                            <section id="carrinho-display">
                                <h2>Seu Carrinho</h2>
                                <ul id="lista-carrinho">
                                    </ul>
                                <div id="carrinho-total">
                                    </div>
                            </section>
                        </div>
                        

                    </div>
                </div>

                <div id='carrinho-passo-2' class="carrinho-passo">
                    <div class="carrinho-container">
                        <h2 class="titulo-checkout">Dados para Locação</h2>
                        
                        <form id="form-checkout">
                            <div class="form-group">
                                <label for="nome-cliente-checkout">Nome:</label>
                                <input type="text" id="nome-cliente-checkout" required>
                            </div>
                            <div class="form-group">
                                <label for="endereco-entrega">Endereço de Entrega:</label>
                                <input type="text" id="endereco-entrega" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="data-inicio-loc">Data de Início:</label>
                                <input type="date" id="data-inicio-loc" required>
                            </div>
                            <div class="form-group">
                                <label for="data-fim-loc">Data de Fim:</label>
                                <input type="date" id="data-fim-loc" required>
                            </div>

                            <button type="button" id="btn-voltar-carrinho" class="btn-secundario">← Voltar</button>
                            <button type="submit" id="btn-avancar-pagamento" class="fechar-pedido-btn">Avançar para Pagamento</button>
                        </form>
                    </div>
                </div>
                
            </div> 
        </section>

        <section id="tela-pagamento" class="hidden">
            <h1 class="page-title">Pagamento via PIX</h1>
            
            <div class="pagamento-container">
                <h2>Valor Total: <span id="valor-final-pix">R$ 0,00</span></h2>
                
                <div class="qrcode-area">
                    <p>Escaneie o QR Code abaixo para efetuar o pagamento:</p>
                    

[Image of a placeholder QR code]
 
                    <img src="https://via.placeholder.com/250" alt="QR Code PIX para pagamento" id="qrcode-pix">
                    <p class="chave-pix-texto">Chave PIX Copia e Cola (simulada): **AL_Locacao.Simulacao**</p>
                </div>
                
                <button id="btn-voltar-checkout" class="btn-secundario">← Voltar aos Dados</button>
                <button id="btn-finalizar-pedido" class="fechar-pedido-btn">Finalizar e Confirmar Pedido</button>
            </div>
        </section>
        
        <section id="tela-opcoes" class="hidden">
            <div class="header-opcoes">
                <h2 class="titulo-opcoes">OPÇÕES</h2>
            </div>
            <ul class="opcoes-lista">
                <li id="link-contrato"><i class='bx bxs-file-pdf'></i><span id='contrato-opcao'>Contrato</span></li>
                <li id="link-trocar-cliente"><i class='bx bxs-log-out-circle'></i><span id="trocar-opcao">Trocar para Cliente</span></li>
                <li id="link-sair-opcoes"><i class='bx bxs-log-out-circle'></i><span id="sair-opcao">Sair</span></li>
            </ul>
        </section>

        <section id="tela-contrato" class="hidden">
        </section>
        
        <section id="tela-sair" class="hidden">
            <h2>Tela de Saída</h2>
            <p>Clique <a href="/Login.html">aqui</a> para sair ou confirme o logout.</p>
        </section>

    </main>
    
    <footer class="contato-fixo">...</footer>

    <script>   
        
        const telas = {
            'catalogo': null, 
            'locacao': null,
            'opcoes': null,  
            'contrato': null,
            'sair': null,      
            'pagamento': null, 
        };

        function mostrarTela(telaAtiva) {

            for (const nomeTela in telas) {
                if (telas[nomeTela] === null) {
                    telas[nomeTela] = document.getElementById(`tela-${nomeTela}`);
                }
            }
            
            for (const nomeTela in telas) {
                const elementoTela = telas[nomeTela];
                if (elementoTela) { 
                    if (nomeTela === telaAtiva) {
                        elementoTela.classList.remove('hidden');
                    } else {
                        elementoTela.classList.add('hidden');
                    }
                }
            }
        }

        let carrinho = JSON.parse(localStorage.getItem('carrinhoLocacao')) || [];

        function salvarCarrinho() {
            localStorage.setItem('carrinhoLocacao', JSON.stringify(carrinho));
        }

        /**
         * 
         * @param {Object} novoItem 
         */
        window.adicionarAoCarrinho = function(novoItem) {
            carrinho = JSON.parse(localStorage.getItem('carrinhoLocacao')) || [];
            
            const itemExistente = carrinho.find(item => item.id === novoItem.id);

            if (itemExistente) {
                itemExistente.quantidade += novoItem.quantidade;
            } else {
                carrinho.push({...novoItem}); 
            }
            
            salvarCarrinho();
            alert(`"${novoItem.nome}" adicionado(s) ao carrinho!`);
        }

        /**
         * 
         * @param {number} index 
         */
        window.removerItem = function(index) {
            carrinho = JSON.parse(localStorage.getItem('carrinhoLocacao')) || [];
            carrinho.splice(index, 1); 
            salvarCarrinho();
            renderizarCarrinho(); 
        }

        function renderizarCarrinho() {
            carrinho = JSON.parse(localStorage.getItem('carrinhoLocacao')) || [];

            const listaCarrinhoElement = document.getElementById('lista-carrinho');
            const totalCarrinhoElement = document.getElementById('carrinho-total');
            const btnCheckout = document.getElementById('btn-iniciar-checkout');
            const valorFinalPixElement = document.getElementById('valor-final-pix');

            if (!listaCarrinhoElement || !totalCarrinhoElement) return;

            listaCarrinhoElement.innerHTML = ''; 
            let totalGeral = 0;
            let htmlItens = '';

            if (carrinho.length === 0) {
                listaCarrinhoElement.innerHTML = '<p>Seu carrinho de locação está vazio.</p>';
                totalCarrinhoElement.innerHTML = '';
                if (btnCheckout) btnCheckout.textContent = `Fechar Pedido (0 itens)`;
                if (valorFinalPixElement) valorFinalPixElement.textContent = 'R$ 0,00';
                return;
            }

            carrinho.forEach((item, index) => {
                const subtotal = item.preco * item.quantidade;
                totalGeral += subtotal;

                htmlItens += `
                    <li class="item-carrinho">
                        <div class="nome-produto">**${item.nome}**</div>
                        <div class="detalhes">
                            Qtd: ${item.quantidade} x R$ ${item.preco.toFixed(2).replace('.', ',')}
                        </div>
                        <div class="subtotal-item">
                            Subtotal: **R$ ${subtotal.toFixed(2).replace('.', ',')}**
                        </div>
                        <button class="btn-remover" onclick="removerItem(${index})">
                            <i class='bx bx-trash'></i> Remover
                        </button>
                    </li>
                `;
            });
            
            listaCarrinhoElement.innerHTML = htmlItens;
            totalCarrinhoElement.innerHTML = `
                <h3>Valor Total: **R$ ${totalGeral.toFixed(2).replace('.', ',')}**</h3>
            `;

            if (btnCheckout) {
                btnCheckout.textContent = `Fechar Pedido (${carrinho.length} itens)`;
            }

            if (valorFinalPixElement) {
                valorFinalPixElement.textContent = `R$ ${totalGeral.toFixed(2).replace('.', ',')}`;
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
        
            const linkLogo = document.getElementById('link-logo'); 
            const linkCarrinho = document.getElementById('link-carrinho');
            const linkOpcoes = document.getElementById('link-opcoes');
            const linkSairMenu = document.getElementById('link-sair'); 
            const linkContrato = document.getElementById('link-contrato'); 
            

            mostrarTela('catalogo');

            if (linkLogo) linkLogo.addEventListener('click', function(event) { event.preventDefault(); mostrarTela('catalogo'); });
            
            if (linkCarrinho) {
                linkCarrinho.addEventListener('click', function(event) {
                    event.preventDefault(); 
                    mostrarTela('locacao');
                    renderizarCarrinho(); 
                });
            }
            
            if (linkOpcoes) linkOpcoes.addEventListener('click', function(event) { event.preventDefault(); mostrarTela('opcoes'); });
            if (linkContrato) linkContrato.addEventListener('click', function(event) { event.preventDefault(); mostrarTela('contrato'); });
            if (linkSairMenu) linkSairMenu.addEventListener('click', function(event) { event.preventDefault(); mostrarTela('sair'); });

            const carrinhoWrapper = document.getElementById('carrinho-wrapper');
            const btnIniciarCheckout = document.getElementById('btn-iniciar-checkout');
            const btnVoltarCarrinho = document.getElementById('btn-voltar-carrinho');

            if (btnIniciarCheckout && carrinhoWrapper) {
                btnIniciarCheckout.addEventListener('click', function(event) {
                    event.preventDefault();
                    carrinhoWrapper.classList.add('passo-2-ativo');
                    document.querySelector('.titulo-carrinho').textContent = 'Dados para Locação'; 
                });
            }

            if (btnVoltarCarrinho && carrinhoWrapper) {
                btnVoltarCarrinho.addEventListener('click', function(event) {
                    event.preventDefault();
                    carrinhoWrapper.classList.remove('passo-2-ativo');
                    document.querySelector('.titulo-carrinho').textContent = 'Carrinho de compras'; 
                });
            }

            const formCheckout = document.getElementById('form-checkout');
            if (formCheckout) {
                formCheckout.addEventListener('submit', function(event) {
                    event.preventDefault();
                    mostrarTela('pagamento');
                });
            }

            const btnVoltarCheckout = document.getElementById('btn-voltar-checkout');
            if (btnVoltarCheckout) {
                btnVoltarCheckout.addEventListener('click', function() {
                    mostrarTela('locacao'); 
                    document.getElementById('carrinho-wrapper').classList.add('passo-2-ativo');
                    document.querySelector('.titulo-carrinho').textContent = 'Dados para Locação';
                });
            }
            
            const btnFinalizarPedido = document.getElementById('btn-finalizar-pedido');
            if (btnFinalizarPedido) {
                btnFinalizarPedido.addEventListener('click', function() {
                    alert('Pedido finalizado com sucesso! Aguardando confirmação do PIX.');
                    localStorage.removeItem('carrinhoLocacao');
                    carrinho = [];
                    
                    mostrarTela('catalogo');
                });
            }
        });
    </script>

    <footer class="contato-fixo">
        <div class="container-contato">
            <h1 id="fale-conosco">Fale Conosco:</h1>
            <a href="https://www.instagram.com/al3locacao/" target="_blank" class="link-social">
                <i class='bx bxl-instagram'></i>
                <span>Instagram</span>
            </a>
            <a href="https://wa.me/554899979376" target="_blank" class="link-social">
                <i class='bx bxl-whatsapp'></i>
                <span>WhatsApp</span>
            </a>
            <a href="mailto:arthurvelhocristiano@gmail.com" class="link-social">
                <i class='bx bxs-envelope'></i>
                <span>Email</span>
            </a>
        </div>
    </footer>

</body>
</html>